<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="manifest" href="manifest.json">
    <title>SpellCheck</title>

	<!-- Collegamento alla favicon -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">
	
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet">

	<!-- Aggiunta di font da Google Fonts -->
	<link href="https://fonts.googleapis.com/css2?family=IM+Fell+English&display=swap" rel="stylesheet">

	
	    <style>
        body {
            font-family: 'IM Fell English', serif;
            background: url('background.jpg') no-repeat center center fixed;
            background-size: cover;
            color: #F8F9FA; /* Colore del testo migliorato per contrasto */
            padding: 20px;
        }

        .form-label, .form-select, .form-control {
            background-color: rgba(255, 255, 255, 0.1); /* Sfondo leggermente più chiaro per il contrasto */
            border: 1px solid #495057;
            color: #F8F9FA; /* Colore del testo migliorato */
        }

        .btn-custom {
            background-color: #495057; /* Colore del bottone più scuro per migliorare il contrasto */
            color: #FFF;
            border: 2px solid #6C757D;
            border-radius: 10px;
            padding: 10px 20px;
            transition: background-color 0.3s, transform 0.3s;
        }

        .btn-custom:hover {
            background-color: #343A40; /* Ulteriore contrasto al passaggio del mouse */
            transform: scale(1.1);
        }

        .container {
            background-color: rgba(0, 0, 0, 0.85); /* Sfondo leggermente più scuro per migliorare il contrasto del testo */
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <header class="text-center mb-4">
        <h1>Calcolo Difficoltà Incantesimo</h1>
        <img src="logo.png" alt="Logo" class="img-fluid" style="max-width: 150px;">
    </header>

    <div class="container">
        <form>
            <div class="mb-3">
                <label for="distanza" class="form-label">A che distanza si trova il bersaglio?</label>
                <select id="distanza" class="form-select">
                    <option value="-2">Personale (-2)</option>
                    <option value="0">Tocco (+0)</option>
                    <option value="3">Corta (entro 3 m) (+3)</option>
                    <option value="10">Media (entro 10 m) (+10)</option>
                    <option value="25">Lunga (entro 25 m) (+25)</option>
                    <option value="50">Lunghissima (entro 1 km) (+50)</option>
                    <option value="60">Non in vista (Conosciuto) (+60)</option>
                    <option value="75">Non in vista (Sconosciuto) (+75)</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="area" class="form-label">Quale sarà l'area d'effetto?</label>
                <select id="area" class="form-select">
                    <option value="0">Creatura – Intera (+0)</option>
                    <option value="3">Creatura – Locazione (+3)</option>
                    <option value="5">Creatura – Sub locazione (Esterna) (+5)</option>
                    <option value="10">Creatura – Sub locazione (Interna) (+10)</option>
                    <option value="5">Ogni bersaglio oltre il primo (+5)</option>
                    <option value="5">Ogni 5 metri di diametro (+5)</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="durata" class="form-label">Durata</label>
                <select id="durata" class="form-select">
                    <option value="0">1 round / Istantaneo (+0)</option>
                    <option value="2">Ogni round oltre il primo (+2)</option>
                    <option value="5">Ogni 7 minuti (+5)</option>
                    <option value="10">Ogni 15 minuti (+10)</option>
                    <option value="-5">Finchè si rimane concentrati (-5)</option>
                    <option value="30">Condizione (Finchè, Quando) (+30)</option>
                    <option value="20">Permanente (+20)</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="gesti" class="form-label">Modalità di lancio gestuali</label>
                <select id="gesti" class="form-select">
                    <option value="5">Senza gesti (+5)</option>
                    <option value="3">Gesti nascosti (+3)</option>
                    <option value="0">Gesti normali (+0)</option>
                    <option value="-3">Gesti ampi (-3)</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="verbale" class="form-label">Modalità di lancio verbale</label>
                <select id="verbale" class="form-select">
                    <option value="5">Senza voce (+5)</option>
                    <option value="3">Voce bassa (+3)</option>
                    <option value="0">Voce normale (+0)</option>
                    <option value="-3">Voce alta (-3)</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="posizione" class="form-label">Modalità di lancio in posizione</label>
                <select id="posizione" class="form-select">
                    <option value="0">Lancio in posizione normale (+0)</option>
                    <option value="5">Lancio in movimento (+5)</option>
                    <option value="10">Lancio con disturbo (+10)</option>
                    <option value="15">Lancio in combattimento (+15)</option>
                </select>
            </div>

            <h2 class="h4">Variabili di lancio</h2>
            <div class="form-check">
                <input type="checkbox" id="variabile1" class="form-check-input" value="-5">
                <label for="variabile1" class="form-check-label">Utilizzo di componenti magici (-5)</label>
            </div>
            <div class="form-check">
                <input type="checkbox" id="variabile2" class="form-check-input" value="0">
                <label for="variabile2" class="form-check-label">Ogni mago aggiuntivo (+0)</label>
            </div>
            <div class="form-check">
                <input type="checkbox" id="variabile3" class="form-check-input" value="-10">
                <label for="variabile3" class="form-check-label">Lancio con rituale (durata 15 minuti) (-10)</label>
            </div>

            <div class="mb-3 mt-3">
                <label for="rounds" class="form-label">Numero di round di concentrazione (max 10)</label>
                <input type="number" id="rounds" class="form-control" min="0" max="10" value="0">
            </div>

            <h2 class="h4">Effetti di lancio</h2>
            <div class="form-check">
                <input type="checkbox" id="effetto1" class="form-check-input" value="5">
                <label for="effetto1" class="form-check-label">Lancio incantesimo senza effetti visivi (+5)</label>
            </div>
            <div class="form-check">
                <input type="checkbox" id="effetto2" class="form-check-input" value="10">
                <label for="effetto2" class="form-check-label">Lancio incantesimo senza effetti magici (+10)</label>
            </div>
            <div class="form-check">
                <input type="checkbox" id="effetto3" class="form-check-input" value="15">
                <label for="effetto3" class="form-check-label">Lancio Incantesimo massimizzato (+15)</label>
            </div>

            <h2 class="h4">Dadi di danni</h2>
            <div class="mb-3">
                <label for="danni1" class="form-label">Ogni +1 aggiuntivo (+2)</label>
                <input type="number" id="danni1" class="form-control" min="0" value="0">
            </div>
            <div class="mb-3">
                <label for="danni2" class="form-label">Ogni d4 aggiuntivo (+5)</label>
                <input type="number" id="danni2" class="form-control" min="0" value="0">
            </div>
            <div class="mb-3">
                <label for="danni3" class="form-label">Ogni d6 aggiuntivo (+7)</label>
                <input type="number" id="danni3" class="form-control" min="0" value="0">
            </div>
            <div class="mb-3">
                <label for="danni4" class="form-label">Ogni d8 aggiuntivo (+9)</label>
                <input type="number" id="danni4" class="form-control" min="0" value="0">
            </div>
            <div class="mb-3">
                <label for="danni5" class="form-label">Ogni d10 aggiuntivo (+11)</label>
                <input type="number" id="danni5" class="form-control" min="0" value="0">
            </div>
            <div class="mb-3">
                <label for="danni6" class="form-label">Ogni d12 aggiuntivo (+13)</label>
                <input type="number" id="danni6" class="form-control" min="0" value="0">
            </div>
            <div class="mb-3">
                <label for="danni7" class="form-label">Ogni d20 aggiuntivo (+15)</label>
                <input type="number" id="danni7" class="form-control" min="0" value="0">
            </div>

            <div class="mb-3">
                <label for="modificatori_mente" class="form-label">Modificatori per Mente</label>
                <select id="modificatori_mente" class="form-select">
                    <option value="0">Leggere (+0)</option>
                    <option value="15">Modificare (+15)</option>
                    <option value="20">Scrivere (+20)</option>
                    <option value="10">Rimuovere (+10)</option>
                </select>
            </div>

            <div class="text-center">
                <button type="button" class="btn btn-custom" onclick="calcolaDifficolta()">Calcola Difficoltà</button>
            </div>
        </form>

        <h2 class="h4 text-center mt-4">Difficoltà Totale: <span id="difficolta_totale">20</span></h2>
    </div>
	
	<!-- Aggiungi qui il pulsante di installazione -->
    <div class="text-center mt-4">
        <button id="install-button" style="display: none;">Install App</button>
    </div>

    <script>
        function calcolaDifficolta() {
            let base = 20;

            let distanza = parseInt(document.getElementById("distanza").value);
            let area = parseInt(document.getElementById("area").value);
            let durata = parseInt(document.getElementById("durata").value);
            let gesti = parseInt(document.getElementById("gesti").value);
            let verbale = parseInt(document.getElementById("verbale").value);
            let posizione = parseInt(document.getElementById("posizione").value);
            let modificatori_mente = parseInt(document.getElementById("modificatori_mente").value);

            let effetti = 0;
            if (document.getElementById("effetto1").checked) effetti += parseInt(document.getElementById("effetto1").value);
            if (document.getElementById("effetto2").checked) effetti += parseInt(document.getElementById("effetto2").value);
            if (document.getElementById("effetto3").checked) effetti += parseInt(document.getElementById("effetto3").value);

            let rounds = parseInt(document.getElementById("rounds").value);
            let concentrazione_mod = -1 * Math.min(rounds, 10);

            let danni_totali = 0;
            danni_totali += parseInt(document.getElementById("danni1").value) * 2;
            danni_totali += parseInt(document.getElementById("danni2").value) * 5;
            danni_totali += parseInt(document.getElementById("danni3").value) * 7;
            danni_totali += parseInt(document.getElementById("danni4").value) * 9;
            danni_totali += parseInt(document.getElementById("danni5").value) * 11;
            danni_totali += parseInt(document.getElementById("danni6").value) * 13;
            danni_totali += parseInt(document.getElementById("danni7").value) * 15;

            let totale = base + distanza + area + durata + gesti + verbale + posizione + danni_totali + modificatori_mente + effetti + concentrazione_mod;

            document.getElementById("difficolta_totale").innerText = totale;
        }
    </script>

    <footer class="text-center mt-4" style="color: #F8F9FA;">
        <p>&copy; 2024 CrypticSentinel - Open Source GDR - SpellCheck</p>
    </footer>

    <!-- Bootstrap JS (opzionale) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
	<script>
	  if ('serviceWorker' in navigator) {
		navigator.serviceWorker.register('service-worker.js')
		.then(reg => console.log('Service Worker registered!', reg))
		.catch(err => console.log('Service Worker registration failed: ', err));
	  }
	</script>
	<script>
	  let deferredPrompt;

	  window.addEventListener('beforeinstallprompt', (e) => {
		e.preventDefault();
		deferredPrompt = e;

		// Mostra un pulsante di installazione personalizzato
		const installButton = document.getElementById('install-button');
		installButton.style.display = 'block';

		installButton.addEventListener('click', () => {
		  installButton.style.display = 'none';
		  deferredPrompt.prompt();
		  deferredPrompt.userChoice.then((choiceResult) => {
			if (choiceResult.outcome === 'accepted') {
			  console.log('User accepted the install prompt');
			} else {
			  console.log('User dismissed the install prompt');
			}
			deferredPrompt = null;
		  });
		});
	  });
	</script>
</body>
</html>
